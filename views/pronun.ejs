<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <style>
      .nav {
        height: 50px;
        width: 100%;
        background-color: #4d4d4d;
        position: relative;
      }

      .nav-links {
        margin-left: auto; 
      }

      .nav-title {
        margin-right: auto; 
      }

      .nav > .nav-header {
        display: inline;
      }

      .nav > .nav-header > .nav-title {
        display: inline-block;
        font-size: 22px;
        color: #fff;
        padding: 10px 10px 10px 10px;
      }

      .nav > .nav-btn {
        display: none;
      }

      .nav > .nav-links {
        display: inline;
        float: right;
        font-size: 18px;
      }

      .nav > .nav-links > a {
        display: inline-block;
        padding: 13px 10px 12px 10px;
        text-decoration: none;
        color: #efefef;
      }

      .nav > .nav-links > a:hover {
        background-color: rgba(0, 0, 0, 0.3);
      }

      .nav > #nav-check {
        display: none;
      }

      @media (max-width:1050px) {
        .nav > .nav-btn {
          display: inline-block;
          position: absolute;
          right: 0px;
          top: 0px;
        }
        .nav > .nav-btn > label {
          display: inline-block;
          width: 50px;
          height: 50px;
          padding: 13px;
        }
        .nav > .nav-btn > label:hover,.nav  #nav-check:checked ~ .nav-btn > label {
          background-color: rgba(0, 0, 0, 0.3);
        }
        .nav > .nav-btn > label > span {
          display: block;
          width: 25px;
          height: 10px;
          border-top: 2px solid #eee;
        }
        .nav > .nav-links {
          position: absolute;
          display: block;
          width: 100%;
          background-color: #333;
          height: 0px;
          transition: all 0.3s ease-in;
          overflow-y: hidden;
          top: 50px;
          left: 0px;
        }
        .nav > .nav-links > a {
          display: block;
          width: 100%;
        }
        .nav > #nav-check:not(:checked) ~ .nav-links {
          height: 0px;
        }
        .nav > #nav-check:checked ~ .nav-links {
          height: calc(100vh - 50px);
          overflow-y: auto;
        }
      }
      html {
        box-sizing: border-box;
      }
      .word-box {
        border: 1px solid gray;
        background: #bfbfbf;
        padding: 0;
      }
      body {
        margin: 0;
        background: #fff;
        background: linear-gradient(rgba(255,255,255,0.9),rgba(255,255,255,0.9)),url('./mudra.jpg');
        background-repeat: no-repeat;
        background-size: cover;
      }
      h1{
        font-size:38px;
        font-family: Courier, monospace;
        margin:40px auto;
        font-weight: 600;
      }
      .single-word:hover {
        color: white;
        cursor: pointer;
      }
      .container {
        height: 100%;
        width: auto;
        display: flex;
        flex-direction: column;
        /* justify-content: center;
        align-items: center; */
      }
      .words {
        max-height: 76vh;
        overflow: auto;
      }

      .single-word {
        text-align: center;
        font-size: 1.3em;  
        text-transform: capitalize;
        padding: 2px;
      }
      button {
        cursor: pointer;
        outline: none;
        width: 200px;
        height: 50px;
        font-family: Courier, monospace;
        font-size: 20px;
        color: white;
        background: blue;
        border: none;
        border-radius: 5px;
        box-shadow: 2px 2px 20px 10px rgba(0, 0, 0, 0.2);
      }
      .butt{
        display: flex;
        justify-content: center;
      }
      button:hover {
        filter: brightness(95%);
      }

      button:active {
        transform: scale(0.98);
      }

      button:disabled {
        cursor: default;
        filter: brightness(30%);
      }

      /* Media Query: Tablet or Smaller */
      @media screen and (max-width: 1000px) {
        .container {
          background-position: center center;
          background-size: cover;
        }

        
      }
    </style>
</head>
<body>

  <div class="nav">
  <input type="checkbox" id="nav-check">
  <div class="nav-header">
    <div class="nav-title">
      Learn Pronunciation
    </div>
  </div>
  <div class="nav-btn">
    <label for="nav-check">
      <span></span>
      <span></span>
      <span></span>
    </label>
  </div>
  
  <div class="nav-links">
    <a href="/" ><b>HOME</b></a>
    <a href="/aboutus" ><b>ABOUT US</b></a>
    <a href="/dictionary" ><b>DICTIONARY</b></a>
    <a href="/quizindex" ><b>QUIZ</b></a>
    <a href="/trans" ><b>TRANSLATOR</b></a>
    <a href="/pronun" ><b>PRONUNCIATION</b></a>
  </div>
</div>
    <div class="container">
        <h1>LEARN HOW TO PRONOUNCE SANSKRIT WORDS</h1>
        <div class="row">
        <div class="col-sm-3 col-xs-2 word-box">
        </div>
        <div class="col-sm-9 col-xs-10 search">
        <form>
            <div class="mb-3">
              <label for="exampleInputEmail1" class="form-label">Enter the Sanskrit text</label>
              <input type="text" class="form-control" id="exampleInputEmail1">
            </div>
            <div class="butt">
            <button id="button">Sound</button>
          </div>
          </form>  
        <audio id="audio" controls hidden></audio>
      </div> 
      </div>  
    </div>
    <!-- Script -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="./dictionary.json"></script>
    <script>
      const VoiceRSS={speech(e){this._validate(e),this._request(e)},_validate(e){if(!e)throw"The settings are undefined";if(!e.key)throw"The API key is undefined";if(!e.src)throw"The text is undefined";if(!e.hl)throw"The language is undefined";if(e.c&&"auto"!=e.c.toLowerCase()){let a=!1;switch(e.c.toLowerCase()){case"mp3":a=(new Audio).canPlayType("audio/mpeg").replace("no","");break;case"wav":a=(new Audio).canPlayType("audio/wav").replace("no","");break;case"aac":a=(new Audio).canPlayType("audio/aac").replace("no","");break;case"ogg":a=(new Audio).canPlayType("audio/ogg").replace("no","");break;case"caf":a=(new Audio).canPlayType("audio/x-caf").replace("no","")}if(!a)throw`The browser does not support the audio codec ${e.c}`}},_request(e){const a=this._buildRequest(e),t=this._getXHR();t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){if(0==t.responseText.indexOf("ERROR"))throw t.responseText;let e=t.responseText;audioElement.src=e,audioElement.onloadedmetadata=(()=>{audioElement.play()})}},t.open("POST","https://api.voicerss.org/",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send(a)},_buildRequest(e){const a=e.c&&"auto"!=e.c.toLowerCase()?e.c:this._detectCodec();return`key=${e.key||""}&src=${e.src||""}&hl=${e.hl||""}&r=${e.r||""}&c=${a||""}&f=${e.f||""}&ssml=${e.ssml||""}&b64=true`},_detectCodec(){const e=new Audio;return e.canPlayType("audio/mpeg").replace("no","")?"mp3":e.canPlayType("audio/wav").replace("no","")?"wav":e.canPlayType("audio/aac").replace("no","")?"aac":e.canPlayType("audio/ogg").replace("no","")?"ogg":e.canPlayType("audio/x-caf").replace("no","")?"caf":""},_getXHR(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw"The browser does not support HTTP request"}};
    </script>
    <script>
      const button = document.getElementById('button');
const audioElement = document.getElementById('audio');
const text=document.querySelector('input[type="text"]')

// Disable/Enable Button
function toggleButton() {
  button.disabled = !button.disabled;
}

// VoiceRSS Speech Function
function tellMe(speech) {
  const speechString = speech.trim().replace(/ /g, '%20');
  // VoiceRSS Speech Parameters
  VoiceRSS.speech({
    key: '58bc94adba5a466888bb92ccfc93ed84',
    src: speechString,
    hl: 'hi-in',
    r: 0,
    c: 'mp3',
    f: '44khz_16bit_stereo',
    ssml: false,
  });
}

// Get jokes from Joke API
async function getSpeech() {
  let speech = '';
  speech=text.value;
  text.value='';
  console.log(speech);
  tellMe(speech);
  toggleButton();
}

// Event Listeners
button.addEventListener('click', getSpeech);
audioElement.addEventListener('ended', toggleButton);

    </script>
    
    <script>
      $('.word-box').append("<div class= 'words'></div>");
      var arr=[];
    function setDefault(sd)
    {
      data = sd;
      for(var i=0;i<197;i++)
    {
      arr.push(Object.keys(data)[i]);
    }
    console.log(arr);
    }
  
    function inputForm(x){
      data=dictionary;
      var word=data[x].meanings[0].def;
      $('input[type="text"]').val(word);
    }
    setDefault(dictionary);
      for(var i=0;i<arr.length;i++)
      {
        {$('.words').append("<div class='single-word'>"+arr[i]+"</div> ");
        }
      }
      $('.single-word').click(function(){
        var x = $(this).html();
        inputForm(x);
      });
    </script>
</body>
</html>
